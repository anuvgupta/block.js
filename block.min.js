/*
  block.js v3.0
  [http://anuv.me/block.js]
  File: block.min.js (block.js minified)
  Source: [https://github.com/anuvgupta/block.js]
  License: MIT [https://github.com/anuvgupta/block.js/blob/v3/LICENSE.md]
  Copyright: (c) 2016 Anuv Gupta
*/
var __blocks={},__$block=!1;try{__$block="function"==typeof jQuery||"function"==typeof window.jQuery}catch(error){__$block=!1}var Block;Block=function(){var n,e,t,r,i,u,l={},s=arguments[0],o=arguments[1],a={},c={},d={},f={count:0},g={};if(void 0!=o&&null!=o&&"function"==typeof o)return __blocks[s]={},__blocks[s].create=arguments[1],void 0!=arguments[2]&&null!=arguments[2]&&"function"==typeof arguments[2]&&(__blocks[s].load=arguments[2]),!0;var h=function(n,e){return"null"==e?null==n:"=null"==e?null===n:"undefined"==e?void 0==n:null===n||void 0==n?!1:"string"==e?"string"==typeof n||n instanceof String:"element"==e?h(n,"object")&&n instanceof Node&&n instanceof Element:"array"==e?"array"==typeof n||n instanceof Array:"object"==e?"object"==typeof n||n instanceof Object:"int"==e?n===parseInt(n,10)&&!isNaN(n):typeof n==e},v=function(n){return document.createElement(n)},m=function(n,e){return e.indexOf(n)>-1},b=function(n,e,t){return 1==e.length?(n[e[0]]=t,n):e.length>1?b(n[e[0]],e.slice(1),t):void 0},p=function(n,e){return 1==e.length?n[e[0]]:e.length>1?p(n[e[0]],e.slice(1)):void 0},_=function(n,e){for(var t={},r=[],i=n.split("\n"),u=0;u<i.length;u++){var l=i[u],s=l.search(/\S/);if(-1!=s&&"//"!=l.substring(s,s+2)){l=l.substring(0,s)+l.substring(s).trim();var o=(l.match(new RegExp(e,"g"))||[]).length;l=l.trim();var a=l.search(/ /);if(-1==a)var c=l,d={};else if(h(i[u+1],"string")&&s<i[u+1].search(/\S/))var c=l,d={};else var c=l.substring(0,a),d=l.substring(a+1);r=r.slice(0,o);var f=r.concat(["__keyOrder"]);h(p(t,f),"array")?p(t,f).push(c):b(t,f,[c]),r.push(c),b(t,r,d)}}return t};if((h(s,"null")||h(s,"undefined"))&&(s="block"),1==o)o=s;else if(h(o,"null")||h(o,"undefined")||0==o){for(o=Math.floor(1e3*Math.random()+1);h(a[o],"object");)o=Math.floor(1e3*Math.random()+1);o="_"+o.toString()}if(n={block:!0,add:function(){var n=[].slice.call(arguments),t=null;if(h(n[0],"undefined")||h(n[0],"null")||n[0].block===!0){n.length>=2&&(t=n[1],n=n.slice(0,1));var i=n[0]}else{n.length>=3&&(t=n[2],n=n.slice(0,2));var i=Block.apply(Block,n)}return a[i.mark()]=i,i.parent(this),h(e,"object")&&e.block?e.add(i,t):h(t,"string")&&h(a[t],"object")&&a[t].block?r.insertBefore(i.node(),a[t].node()):r.appendChild(i.node()),this},__add:function(){var n=[].slice.call(arguments),i=null;if(h(n[0],"undefined")||h(n[0],"null")||n[0].block===!0){n.length>=2&&(i=n[1],n=n.slice(0,1));var u=n[0]}else{n.length>=3&&(i=n[2],n=n.slice(0,2));var u=Block.apply(Block,n)}return c[u.mark()]=u,u.__parent(this),h(t,"object")&&t.block?e.__add(u,i):h(i,"string")&&h(c[i],"object")&&c[i].block?r.insertBefore(u.node(),c[i].node()):r.appendChild(u.node()),this},setAdd:function(n){return h(n,"object")&&n.block&&(e=n),this},__setAdd:function(n){return h(n,"object")&&n.block&&(t=n),this},remove:function(){return $marking=arguments[0],h($marking,"null")&&h($marking,"undefined")&&h(i,"null")&&h(i,"undefined")?i.remove(o):h($marking,"string")&&!h(a[$marking],"null")&&(h(e,"object")&&e.block?e.node().removeChild(a[$marking].node()):r.removeChild(a[$marking].node()),delete a[$marking]),this},__remove:function(){return $marking=arguments[0],h($marking,"null")&&h($marking,"undefined")&&h(u,"null")&&h(u,"undefined")?u.__remove(o):h($marking,"string")&&!h(c[$marking],"null")&&(h(t,"object")&&t.block?t.node().removeChild(c[$marking].node()):r.removeChild(c[$marking].node()),delete c[$marking]),this},empty:function(){for(var n in a)this.remove(n);return this},__empty:function(){for(var n in a)this.remove(n);return this},type:function(){var n=arguments[0];return h(n,"string")?(h(__blocks[n],"null")||h(__blocks[n],"undefined")||(s=n),this):s},"class":function(){return h(arguments[0],"string")?(r.className+=" "+arguments[0],this):r.className},id:function(){return h(arguments[0],"string")?(r.id=arguments[0],this):r.id},mark:function(){var n=arguments[0];return h(n,"string")?("css"==n?console.warn("[BLOCK] cannot mark as '"+n+"' (reserved)"):o=n,this):o},attribute:function(n){var e=arguments[1];return h(e,"string")?(r.setAttribute(n,e),this):r.getAttribute(n)},css:function(){var n=arguments[0];if(h(n,"object"))for($p in n)n.hasOwnProperty($p)&&h(n[$p],"string")&&(r.style[$p]=n[$p]);else{if(!h(n,"string")){var e={},t=r.style;for($prop in t)!t.hasOwnProperty($prop)||""==t[$prop]||!isNaN(parseFloat($prop))&&isFinite($prop)||(e[$prop]=t[$prop]);return e}if($value=arguments[1],!h($value,"string"))return r.style[n];r.style[n]=$value}return this},key:function(n){if($data=arguments[1],h($data,"undefined")||h($data,"null")){if(!h(d[n],"undefined")&&!h(d[n],"null"))return d[n];d[n]={}}else d[n]=$data;return this},blockdata:function(n){return h(f[n],"undefined")||h(f[n],"null")?null:f[n]},on:function(n,e){var t=this;if(h(n,"string"))if(h(e,"function"))if($newCallback=function(n){e(n,t,n.detail)},h(arguments[2],"string")){var i=arguments[2],u=n+"_"+i;h(l[n],"object")||(l[n]={}),l[n][i]=$newCallback,r.addEventListener(u,$newCallback,!1),l[u]=function(e){var r=e.detail;h(e.detail,"null")||h(e.detail,"undefined")?t.on(n,i):t.on(n,i,r)},r.addEventListener(n,l[u],!1)}else r.addEventListener(n,$newCallback,!1);else h(e,"string")?u=n+"_"+e:(h(e,"null")||h(e,"undefined")||h(e,"object"))&&(u=n),$data=arguments[arguments.length-1],(h($data,"null")||h($data,"undefined")||!h($data,"object"))&&($data={}),document.createEvent?($event=document.createEvent("CustomEvent"),$event.initCustomEvent(u,!0,!0,$data),r.dispatchEvent($event)):($event=document.createEventObject(),$event.eventType=u,r.fireEvent("on"+u,$event));return this},off:function(n,e){var t=l[n+"_"+e],i=null;return h(l[n],"null")||h(l[n],"undefined")||(i=l[n][e]),h(t,"function")&&(l[n+"_"+e]=null,r.removeEventListener(n,t)),h(i,"function")&&(l[n][e]=null,r.removeEventListener(n,i)),this},child:function(n){return h(n,"string")?n.includes("/")?a[n.substring(0,n.indexOf("/"))].child(n.substring(n.indexOf("/")+1)):h(a[n],"null")||h(a[n],"undefined")?null:a[n]:null},children:function(){return a},childCount:function(){var n=0;for(var e in a)n++;return n},__child:function(n){return h(n,"string")?n.includes("/")?c[n.substring(0,n.indexOf("/"))].__child(n.substring(n.indexOf("/")+1)):h(c[n],"null")||h(c[n],"undefined")?null:c[n]:null},__children:function(){return c},__childCount:function(){var n=0;for(var e in c)n++;return n},sibling:function(n){return null!=i&&void 0!=i?i.child(n):null},siblings:function(){return null!=i&&void 0!=i?i.children():null},siblingCount:function(){return null!=i&&void 0!=i?i.childCount():null},__sibling:function(n){return null!=u&&void 0!=u?u.__child(n):null},__siblings:function(){return null!=u&&void 0!=u?u.__children():null},__siblingCount:function(){return null!=u&&void 0!=u?u.__childCount():null},parent:function(){var n=arguments[0];return h(n,"object")&&n.block&&h(i,"undefined")&&h(i,"null")?(i=n,this):!h(n,"int")||h(i,"undefined")||h(i,"null")?h(i,"undefined")||h(i,"null")?null:i:0==n?i:i.parent(n-1)},__parent:function(){var n=arguments[0];return h(n,"object")&&n.block&&h(u,"undefined")&&h(u,"null")?(u=n,this):!h(n,"int")||h(u,"undefined")||h(u,"null")?h(u,"undefined")||h(u,"null")?null:u:0==n?u:u.__parent(n-1)},html:function(){var n=arguments[0],e=arguments[1];return h(n,"string")?(h(e,"null")||h(e,"undefined")||e!==!0?r.innerHTML=n:r.innerHTML+=n,this):r.innerHTML},node:function(){return r},fill:function(n){return h(n,"object")&&n.block?(n.empty(),n=n.node()):h(n,"string")&&(n=document.querySelector(n)),h(n,"element")&&(n.innerHTML="",n.appendChild(r)),this},jQuery:function(){if(__$block){var n=this;return jQuery.extend(jQuery(r),{block:function(){return n}})}return console.warn("jQuery not detected"),null},$:function(){return this.jQuery()},data:function(n){var e={},t={},i=[];if(h(n,"object")){if(h(n.__keyOrder,"array"))var u=n.__keyOrder;else var u=Object.keys(n);for(var l=0;l<u.length;l++){var o=u[l];if(n.hasOwnProperty(o)){var c=o.search(/ /);if("css"==o)t=n.css,i.push("css");else if(c>0){var d=o.substring(0,c),v=o.substring(c+1),b=Block(d,v);h(n[o],"object")&&(h(arguments[1],"string")?b.data(n[o],arguments[1]):b.data(n[o]),i.push(o)),this.add(b,h(u[l+1],"null")||h(u[l+1],"undefined")?null:u[l+1]),i.push(o)}else h(n[o],"object")&&h(a[o],"object")?(h(arguments[1],"string")?a[o].data(n[o],arguments[1]):a[o].data(n[o]),i.push(o)):(h(n[o],"object")&&i.push(o),e[o]=n[o])}}}else if(h(n,"string")||h(n,"int"))e={val:n};else{if(!h(n,"null")&&h(n,"object"))return this;e={}}if("block"!=s&&!h(__blocks[s],"undefined")&&!h(__blocks[s],"null")){var p=function(n){return"this"==n?e:h(e[n],"undefined")||h(e[n],"null")?null:(i.push(n),e[n])},_=function(n){return"this"==n?t:h(t[n],"undefined")||h(t[n],"null")?null:t[n]};__blocks[s].load(this,p,_)}for($property in t)t.hasOwnProperty($property)&&(r.style[$property]=t[$property]);for(o in g)g.hasOwnProperty(o)&&e.hasOwnProperty(o)&&g[o](e[o],this);for(o in e)e.hasOwnProperty(o)&&!m(o,i)&&r.setAttribute(o,e[o]);return f.count++,f[h(arguments[1],"string")?arguments[1]:"#"+f.count]={data:e,css:t},this},bind:function(n,e){return h(n,"string")&&h(e,"function")&&(g[n]=e),this},parse:function(n,e){e=e.replace(/\r\n|\r|\n/g,"\n");var t=e.substring(0,e.indexOf("*")),r=_(e.substring(e.indexOf("*")+2),t);return arguments[arguments.length-1]===!0?r:(h(arguments[2],"string")?this.data(r[o],arguments[2]):this.data(r[o]),h(n,"function")&&n(this),this)},load:function(n,e){var t=this,r=function(n,r){t.parse.apply(t,[n,r,e])},i=arguments[2],u=arguments[3];if((null==u||void 0==u)&&(u=!0),h(i,"string")&&"jquery"===i.toLowerCase())__$block?jQuery.ajax({url:e+".block",type:"GET",async:u,success:function(e){r(n,e)}}):console.warn("jQuery not detected");else if(i===!0){var l;l=window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP"),l.onreadystatechange=function(){4==l.readyState&&200==l.status&&r(n,l.responseText)},l.open("GET",e+".block",u),l.send()}else r(n,customBlockData[e]);return this}},"block"==s){r=v("div"),n.css({width:"100%",height:"100%",display:"table",textAlign:"center"});var k=Block("div")["class"]("content").mark("content");k.css({display:"table-cell",textAlign:"center",verticalAlign:"middle",margin:"0 auto"}),n.setAdd(k),n.__add(k)}else null!=__blocks[s]?(n=__blocks[s].create(),n.type(s),n.mark(o)):r=v(s);return n.attribute("block",o),n};
