/*
  block.js v3.0
  [http://anuv.me/block.js]
  File: block.min.js (block.js minified)
  Source: [https://github.com/anuvgupta/block.js]
  License: MIT [https://github.com/anuvgupta/block.js/blob/v3/LICENSE.md]
  Copyright: (c) 2016 Anuv Gupta
*/
var Block;Block=function(){var block,addblock,__addblock,element,events={},customEvents={},type=arguments[0],marking=arguments[1],parent,__parent,children={},__children={},keys={},blockdata={count:0},dataBindings={},mediaQueries={};if(void 0!=marking&&null!=marking&&"function"==typeof marking)return Block.blocks[type]={},Block.blocks[type].create=arguments[1],void 0!=arguments[2]&&null!=arguments[2]&&"function"==typeof arguments[2]&&(Block.blocks[type].load=arguments[2]),!0;var isType=function(e,t){return"null"==t?null==e:"=null"==t?null===e:"undefined"==t?void 0==e:null===e||void 0==e?!1:"string"==t?"string"==typeof e||e instanceof String:"function"==t?"function"==typeof e||e instanceof Function:"element"==t?isType(e,"object")&&e instanceof Node&&e instanceof Element:"array"==t?"array"==typeof e||e instanceof Array:"object"==t?"object"==typeof e||e instanceof Object:"int"==t?e===parseInt(e,10)&&!isNaN(e):typeof e==t},node=function(e){return document.createElement(e)},inArr=function(e,t){return t.indexOf(e)>-1},setData=function(e,t,n){return 1==t.length?(e[t[0]]=n,e):t.length>1?setData(e[t[0]],t.slice(1),n):void 0},getData=function(e,t){return 1==t.length?e[t[0]]:t.length>1?getData(e[t[0]],t.slice(1)):void 0},parseBlock=function(e,t){for(var n={},i=[],r=e.split("\n"),a=0;a<r.length;a++){var s=r[a],l=s.search(/\S/);if(-1!=l&&"//"!=s.substring(l,l+2)){s=s.substring(0,l)+s.substring(l).trim();var o=(s.match(new RegExp(t,"g"))||[]).length;s=s.trim();var d=s.search(/ /);if(-1==d||":"==s.substring(0,1)||"@"==s.substring(0,1)){var c=s,u={};if("{"==c){for(var p="",y=a+1;y<r.length;y++){var $=r[y],k=($.search(/\S/),($.match(new RegExp(t,"g"))||[]).length);if($=$.trim(),"}"==$&&k==o)break;p+=$+"\n "}a=y,c="__js",u=p}}else if(isType(r[a+1],"string")&&l<r[a+1].search(/\S/))var c=s,u={};else var c=s.substring(0,d),u=s.substring(d+1);i=i.slice(0,o);var b=i.concat(["__keyOrder"]);isType(getData(n,b),"array")?getData(n,b).push(c):setData(n,b,[c]),i.push(c),setData(n,i,u)}}return n};if((isType(type,"null")||isType(type,"undefined"))&&(type="block"),1==marking)marking=type;else if(isType(marking,"null")||isType(marking,"undefined")||0==marking){for(marking=Math.floor(1e3*Math.random()+1);isType(children[marking],"object");)marking=Math.floor(1e3*Math.random()+1);marking="_"+marking.toString()}if(block={block:!0,add:function(){var e=[].slice.call(arguments),t=null;if(isType(e[0],"undefined")||isType(e[0],"null")||e[0].block===!0){e.length>=2&&(t=e[1],e=e.slice(0,1));var n=e[0]}else{e.length>=3&&(t=e[2],e=e.slice(0,2));var n=Block.apply(Block,e)}return children[n.mark()]=n,n.parent(this),isType(addblock,"object")&&addblock.block?addblock.add(n,t):isType(t,"string")&&isType(children[t],"object")&&children[t].block?element.insertBefore(n.node(),children[t].node()):element.appendChild(n.node()),this},__add:function(){var e=[].slice.call(arguments),t=null;if(isType(e[0],"undefined")||isType(e[0],"null")||e[0].block===!0){e.length>=2&&(t=e[1],e=e.slice(0,1));var n=e[0]}else{e.length>=3&&(t=e[2],e=e.slice(0,2));var n=Block.apply(Block,e)}return __children[n.mark()]=n,n.__parent(this),isType(__addblock,"object")&&__addblock.block?addblock.__add(n,t):isType(t,"string")&&isType(__children[t],"object")&&__children[t].block?element.insertBefore(n.node(),__children[t].node()):element.appendChild(n.node()),this},setAdd:function(e){return isType(e,"object")&&e.block&&(addblock=e),this},__setAdd:function(e){return isType(e,"object")&&e.block&&(__addblock=e),this},remove:function(){return $marking=arguments[0],isType($marking,"null")&&isType($marking,"undefined")&&isType(parent,"null")&&isType(parent,"undefined")?parent.remove(marking):isType($marking,"string")&&!isType(children[$marking],"null")&&(isType(addblock,"object")&&addblock.block?addblock.node().removeChild(children[$marking].node()):element.removeChild(children[$marking].node()),delete children[$marking]),this},__remove:function(){return $marking=arguments[0],isType($marking,"null")&&isType($marking,"undefined")&&isType(__parent,"null")&&isType(__parent,"undefined")?__parent.__remove(marking):isType($marking,"string")&&!isType(__children[$marking],"null")&&(isType(__addblock,"object")&&__addblock.block?__addblock.node().removeChild(__children[$marking].node()):element.removeChild(__children[$marking].node()),delete __children[$marking]),this},empty:function(){for(var e in children)this.remove(e);return this},__empty:function(){for(var e in children)this.remove(e);return this},type:function(){var e=arguments[0];return isType(e,"string")?(isType(Block.blocks[e],"null")||isType(Block.blocks[e],"undefined")||(type=e),this):type},"class":function(){return isType(arguments[0],"string")?(element.className+=" "+arguments[0],this):element.className},id:function(){return isType(arguments[0],"string")?(element.id=arguments[0],this):element.id},mark:function(){var e=arguments[0];return isType(e,"string")?("css"==e?console.warn("[BLOCK] cannot mark as '"+e+"' (reserved)"):marking=e,this):marking},attribute:function(e){var t=arguments[1];return isType(t,"string")?(element.setAttribute(e,t),this):element.getAttribute(e)},css:function(){var e=arguments[0];if(isType(e,"object"))for($p in e)e.hasOwnProperty($p)&&isType(e[$p],"string")&&(element.style[$p]=e[$p]);else{if(!isType(e,"string")){var t={},n=element.style;for($prop in n)!n.hasOwnProperty($prop)||""==n[$prop]||!isNaN(parseFloat($prop))&&isFinite($prop)||(t[$prop]=n[$prop]);return t}if($value=arguments[1],!isType($value,"string"))return element.style[e];element.style[e]=$value}return this},key:function(e){return $data=arguments[1],isType($data,"undefined")||isType($data,"null")?isType(keys[e],"undefined")||isType(keys[e],"null")?null:keys[e]:(keys[e]=$data,this)},blockdata:function(e){return isType(blockdata[e],"undefined")||isType(blockdata[e],"null")?null:blockdata[e]},on:function(e,t){var n=this;if(isType(e,"string"))if(isType(t,"function"))if($newCallback=function(e){e.detail;isType(e.detail,"null")||isType(e.detail,"undefined")?t(e,n,{}):t(e,n,e.detail)},isType(arguments[2],"string")){var i=arguments[2],r=e+"_"+i;isType(events[e],"object")||(events[e]={}),events[e][i]=function(e){$newCallback(e)},element.addEventListener(r,events[e][i],!1),events[r]=function(t){var r=t.detail;isType(t.detail,"null")||isType(t.detail,"undefined")?n.on(e,i,{}):n.on(e,i,r)},element.addEventListener(e,events[r],!1)}else element.addEventListener(e,$newCallback,!1);else isType(t,"string")?r=e+"_"+t:(isType(t,"null")||isType(t,"undefined")||isType(t,"object"))&&(r=e),$data=arguments[arguments.length-1],(isType($data,"null")||isType($data,"undefined")||!isType($data,"object"))&&($data={}),window.CustomEvent?($event=new CustomEvent(r,{detail:$data,bubbles:!0,cancelable:!0}),element.dispatchEvent($event)):document.createEvent?($event=document.createEvent("Event"),$event.initEvent(r,!0,!0,$data),element.dispatchEvent($event)):document.createEventObject?($event=document.createEventObject(),$event.eventType=r,$event.detail=$data,element.fireEvent("on"+r,$event),console.warn("Event bubbling and data not fully supported")):console.warn("Events not fully supported");return this},off:function(e,t){var n=events[e+"_"+t],i=null;return isType(events[e],"null")||isType(events[e],"undefined")||(i=events[e][t]),isType(n,"function")&&(events[e+"_"+t]=null,element.removeEventListener(e,n)),isType(i,"function")&&(events[e][t]=null,element.removeEventListener(e+"_"+t,i)),this},child:function(e){return isType(e,"string")?e.includes("/")?children[e.substring(0,e.indexOf("/"))].child(e.substring(e.indexOf("/")+1)):isType(children[e],"null")||isType(children[e],"undefined")?null:children[e]:null},children:function(){return children},childCount:function(){var e=0;for(var t in children)e++;return e},__child:function(e){return isType(e,"string")?e.includes("/")?__children[e.substring(0,e.indexOf("/"))].__child(e.substring(e.indexOf("/")+1)):isType(__children[e],"null")||isType(__children[e],"undefined")?null:__children[e]:null},__children:function(){return __children},__childCount:function(){var e=0;for(var t in __children)e++;return e},sibling:function(e){return null!=parent&&void 0!=parent?parent.child(e):null},siblings:function(){return null!=parent&&void 0!=parent?parent.children():null},siblingCount:function(){return null!=parent&&void 0!=parent?parent.childCount():null},__sibling:function(e){return null!=__parent&&void 0!=__parent?__parent.__child(e):null},__siblings:function(){return null!=__parent&&void 0!=__parent?__parent.__children():null},__siblingCount:function(){return null!=__parent&&void 0!=__parent?__parent.__childCount():null},parent:function(){var e=arguments[0];return isType(e,"object")&&e.block&&isType(parent,"undefined")&&isType(parent,"null")?(parent=e,this):!isType(e,"int")||isType(parent,"undefined")||isType(parent,"null")?isType(parent,"undefined")||isType(parent,"null")?null:parent:0==e?parent:parent.parent(e-1)},__parent:function(){var e=arguments[0];return isType(e,"object")&&e.block&&isType(__parent,"undefined")&&isType(__parent,"null")?(__parent=e,this):!isType(e,"int")||isType(__parent,"undefined")||isType(__parent,"null")?isType(__parent,"undefined")||isType(__parent,"null")?null:__parent:0==e?__parent:__parent.__parent(e-1)},html:function(){var e=arguments[0],t=arguments[1];return isType(e,"string")?(isType(t,"null")||isType(t,"undefined")||t!==!0?element.innerHTML=e:element.innerHTML+=e,this):element.innerHTML},node:function(){return element},fill:function(e){return isType(e,"object")&&e.block?(e.empty(),e=e.node()):isType(e,"string")&&(e=document.querySelector(e)),isType(e,"element")&&(e.innerHTML="",e.appendChild(element)),this},jQuery:function(){if(Block.jQuery){var e=this;return jQuery.extend(jQuery(element),{block:function(){return e}})}return console.warn("jQuery not detected"),null},$:function(){return this.jQuery()},data:function($blockdata){var $data={},$style={},$reservedAttributes=[];if(isType($blockdata,"object")){if($reservedAttributes.push("__keyOrder"),isType($blockdata.__keyOrder,"array"))var $iterableKeys=$blockdata.__keyOrder;else var $iterableKeys=Object.keys($blockdata);for(var $j=0;$j<$iterableKeys.length;$j++){var $key=$iterableKeys[$j];if($blockdata.hasOwnProperty($key)){var $midspace=$key.search(/ /);if("css"==$key)$style=$blockdata.css,$reservedAttributes.push("css");else if("__js"==$key)eval("$jsCallback = function (event, block, data) { "+$blockdata.__js+" }"),this.on("__temp_event",$jsCallback,"__rand"),this.on("__temp_event","__rand"),this.off("__temp_event","__rand"),$reservedAttributes.push("__js");else if(":"==$key.substring(0,1))$reservedAttributes.push($key),$dataToLoad=$blockdata[$key],$eventCallback="",isType($dataToLoad.__js,"string")&&($eventCallback+=$dataToLoad.__js,delete $dataToLoad.__js),isType($dataToLoad,"undefined")||isType($dataToLoad,"null")||($dataToLoad=JSON.stringify($dataToLoad),isType(arguments[1],"string")?$eventCallback+=" block.data("+$dataToLoad+', "'+arguments[1]+'");':$eventCallback+=" block.data("+$dataToLoad+");"),eval("$eventCallback = function (event, block, data) { "+$eventCallback+" };"),$eventTypes=$key.substring(1).split(","),$eventTypes.forEach(function(e){this.on(e.trim(),$eventCallback)},this);else if("@"==$key.substring(0,1))$reservedAttributes.push($key),$key.length>6&&"query"==$key.substring(1,6)&&($dataToLoad=$blockdata[$key],$callbackJS="",isType($dataToLoad.__js,"string")&&($callbackJS+=$dataToLoad.__js,delete $dataToLoad.__js),isType($dataToLoad,"undefined")||isType($dataToLoad,"null")||($dataToLoad=JSON.stringify($dataToLoad),isType(arguments[1],"string")?$callbackJS+=" block.data("+$dataToLoad+', "'+arguments[1]+'");':$callbackJS+=" block.data("+$dataToLoad+");"),$objectToEnd=$key.substring($key.search(/ /)+1),$propertyToEnd=$objectToEnd.substring($objectToEnd.search(/ /)+1),$conditionToEnd=$propertyToEnd.substring($propertyToEnd.search(/ /)+1),$object=$objectToEnd.substring(0,$objectToEnd.search(/ /)).trim(),$property=$propertyToEnd.substring(0,$propertyToEnd.search(/ /)).trim(),$condition=$conditionToEnd.trim(),"window"==$object&&("height"==$property?$property="innerHeight":"width"==$property&&($property="innerWidth")),$callbackJS="if ("+$object+"."+$property+" "+$condition+") { "+$callbackJS+" }",isType(mediaQueries[$object],"object")?isType(mediaQueries[$object][$property],"array")||(mediaQueries[$object][$property]=[]):(mediaQueries[$object]={},mediaQueries[$object][$property]=[]),mediaQueries[$object][$property].unshift($callbackJS));else if("$"==$key.substring(0,1))$reservedAttributes.push($key),this.key($key.substring(1),$blockdata[$key]);else if($midspace>0){var $childtype=$key.substring(0,$midspace),$childmarking=$key.substring($midspace+1),$childblock=Block($childtype,$childmarking);isType($blockdata[$key],"object")&&(isType(arguments[1],"string")?$childblock.data($blockdata[$key],arguments[1]):$childblock.data($blockdata[$key]),$reservedAttributes.push($key)),this.add($childblock,isType($iterableKeys[$j+1],"null")||isType($iterableKeys[$j+1],"undefined")?null:$iterableKeys[$j+1]),$reservedAttributes.push($key)}else isType($blockdata[$key],"object")&&isType(children[$key],"object")?(isType(arguments[1],"string")?children[$key].data($blockdata[$key],arguments[1]):children[$key].data($blockdata[$key]),$reservedAttributes.push($key)):(isType($blockdata[$key],"object")&&$reservedAttributes.push($key),$data[$key]=$blockdata[$key])}}}else if(isType($blockdata,"string")||isType($blockdata,"int"))$data={val:$blockdata};else{if(!isType($blockdata,"null")&&isType($blockdata,"object"))return this;$data={}}if("block"!=type&&!isType(Block.blocks[type],"undefined")&&!isType(Block.blocks[type],"null")){var $getData=function(e,t){var n;return"this"==e?n=$data:isType($data[e],"undefined")||isType($data[e],"null")?n=null:($reservedAttributes.push(e),n=$data[e]),!isType(t,"function")||isType(n,"=null")||isType(n,"undefined")||t(n),n},$getStyle=function(e,t){var n;return n="this"==e?$style:isType($style[e],"undefined")||isType($style[e],"null")?null:$style[e],!isType(t,"function")||isType(n,"=null")||isType(n,"undefined")||t(n),n};Block.blocks[type].load(this,$getData,$getStyle)}for($property in $style)$style.hasOwnProperty($property)&&(element.style[$property]=$style[$property]);for($key in dataBindings)dataBindings.hasOwnProperty($key)&&$data.hasOwnProperty($key)&&dataBindings[$key]($data[$key],this);for($key in $data)$data.hasOwnProperty($key)&&!inArr($key,$reservedAttributes)&&element.setAttribute($key,$data[$key]);return blockdata.count++,blockdata[isType(arguments[1],"string")?arguments[1]:"#"+blockdata.count]={data:$data,css:$style},this},bind:function(e,t){return isType(e,"string")&&isType(t,"function")&&(dataBindings[e]=t),this},parse:function(e,t){t=t.replace(/\r\n|\r|\n/g,"\n");var n=t.substring(0,t.indexOf("*")),i=parseBlock(t.substring(t.indexOf("*")+2),n);return arguments[arguments.length-1]===!0?i:(isType(arguments[2],"string")?this.data(i[marking],arguments[2]):this.data(i[marking]),isType(e,"function")&&e(this),this)},load:function(e,t){var n=this,i=function(e,i){n.parse.apply(n,[e,i,t])},r=arguments[2],a=arguments[3];if((null==a||void 0==a)&&(a=!0),isType(r,"string")&&"jquery"===r.toLowerCase())Block.jQuery?jQuery.ajax({url:t+".block",type:"GET",async:a,success:function(t){i(e,t)}}):console.warn("jQuery not detected");else if(r===!0){var s;s=window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP"),s.onreadystatechange=function(){4==s.readyState&&200==s.status&&i(e,s.responseText)},s.open("GET",t+".block",a),s.send()}else i(e,customBlockData[t]);return this}},"block"==type){element=node("div"),block.css({width:"100%",height:"100%",display:"table",textAlign:"center"});var content=Block("div")["class"]("content").mark("content");content.css({display:"table-cell",textAlign:"center",verticalAlign:"middle",margin:"0 auto"}),block.setAdd(content),block.__add(content)}else null!=Block.blocks[type]?(block=Block.blocks[type].create(),block.type(type),block.mark(marking)):element=node(type);return block.attribute("block",marking),$resizeCallback=function($e){$callback="";for($objectName in mediaQueries)if(mediaQueries.hasOwnProperty($objectName)){$object=mediaQueries[$objectName];for($propertyName in $object)if($object.hasOwnProperty($propertyName)){$property=$object[$propertyName];for($i in $property)0==$i?$callback+=" "+$property[$i]:$callback+=" else "+$property[$i]}}eval("$callback = function (event, block, data) { "+$callback+" };"),isType($e.detail,"null")||isType($e.detail,"undefined")?$callback($e,block,{}):$callback($e,block,$e.detail)},window.addEventListener("resize",$resizeCallback),block},Block.blocks={},Block.jQuery=!1;try{Block.jQuery="function"==typeof jQuery||"function"==typeof window.jQuery}catch(error){Block.jQuery=!1}
